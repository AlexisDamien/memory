<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IndexedDB CRUD Test</title>
    <script type="module">
        import { openDatabase } from './dbAccess.js';
        import { addObject } from './createEntry.js';
        import { getAllObjects } from './readEntry.js';
        import { updateObject } from './updateEntry.js';
        import { deleteObject } from './deleteEntry.js';

        let db;
        //test test test
        document.addEventListener('DOMContentLoaded', () => {
            openDatabase('memory', 1, [
                { name: 'categories', options: { keyPath: 'id', autoIncrement: true }, indices: [{ name: 'name', keyPath: 'name' }] },
                { name: 'products', options: { keyPath: 'id', autoIncrement: true }, indices: [{ name: 'name', keyPath: 'name' }] }
            ], function(database) {
                db = database;
                console.log('Database initialized');
            });

            document.getElementById('addCategory').addEventListener('click', () => {
                addObject(db, 'categories', { name: 'Category 1', description: 'Description 1' });
            });

            document.getElementById('getCategories').addEventListener('click', () => {
                getAllObjects(db, 'categories');
            });

            document.getElementById('updateCategory').addEventListener('click', () => {
                updateObject(db, 'categories', 1, { name: 'Updated Category 1', description: 'Updated Description 1' });
            });

            document.getElementById('deleteCategory').addEventListener('click', () => {
                deleteObject(db, 'categories', 1);
            });
        });
    </script>
</head>
<body>
<h1>IndexedDB CRUD Test</h1>
<button id="addCategory">Add Category</button>
<button id="getCategories">Get Categories</button>
<button id="updateCategory">Update Category</button>
<button id="deleteCategory">Delete Category</button>
<pre id="output"></pre>
</body>
</html>
